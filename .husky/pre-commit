#!/bin/sh

# Run lint-staged (formats only staged files, no re-staging race condition)
echo "Running lint-staged..."
bunx lint-staged
if [ $? -ne 0 ]; then
  echo "❌ lint-staged failed. Please fix the errors before committing."
  exit 1
fi

# Run type checking
echo "Running type checks..."
bun --cwd=packages/coding-agent run check && bun --cwd=packages/web-ui run check
if [ $? -ne 0 ]; then
  echo "❌ Type checks failed. Please fix the errors before committing."
  exit 1
fi

echo "✅ All pre-commit checks passed!"
